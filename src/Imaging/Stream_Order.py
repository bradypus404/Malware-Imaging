import sys
import math
from PIL import Image
import numpy as np
import pandas as pd

hexData = []
try:
    IN = open('C:/Windows/System32/notepad.exe', 'rb') # 파일 오픈
except IOError:
    print('그런 파일이 없거나, 열기 에러입니다.')
    exit(1)
#OUT = open('binaryNotepad.txt', 'w')

#offset = 0

output = []
output2 = []

while True:
    buf16 = IN.read(16)
    buf16Len = len(buf16)
    if(buf16Len == 0):break

    for i in range(buf16Len): # 헥사 부분의 헥사 값 16개 출력 (8개씩 2부분으로)

        output.append(int(buf16[i]))
        output2.append(hex(buf16[i]))
print(type(output2[0]))

#print(' '.join(output2[:500]).replace('0x', ''))
sqrt = math.ceil(math.sqrt(len(output)))
sum = sqrt * sqrt - len(output)

output = np.pad(output, (0, sum), mode='constant', constant_values=0)

outputDuble = np.reshape(output,(sqrt, sqrt))
print(outputDuble)

''' 열 바꾸기
df = pd.DataFrame(outputDuble)
df.iloc[:5, 460] = 0
df.iloc[5:, 460] = 1

print('\n\n',outputDuble)
'''
image = Image.fromarray(np.uint8(outputDuble))
img = Image.new(mode='L', size=(256, 256))
image.save('notepad.png')
image.show()

IN.close()